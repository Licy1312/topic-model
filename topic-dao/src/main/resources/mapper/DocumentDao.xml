<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shu.dao.facade.IDocumentDao">
    <sql id="documentColumn">
        d.d_id AS "id",
        d.d_title AS "title",
        d.d_abstract AS "dAbstract",
        d.d_content AS "content",
        d.d_keywords AS "keywords",
        d.d_topics AS "topics",
        d.d_path AS "path",
        d.d_type AS "type",
        d.create_time AS "createTime",
        d.update_time AS "updateTime",
        d.hits AS "hits"
    </sql>
    <resultMap id="documentDO" type="com.shu.dao.entity.DocumentDO">
        <result column="d_id" property="id"/>
        <result column="hits" property="hits"/>

    </resultMap>

    <select id="getDocumentById" resultType="com.shu.dao.entity.DocumentDO">
        SELECT
          <include refid="documentColumn"/>
        FROM documentDO d WHERE d.d_id = #{id}
    </select>
    <select id="getContent" resultType="com.shu.dao.entity.DocumentDO">
        SELECT
        <include refid="documentColumn"/>
--         d.d_id
        FROM documentDO d
    </select>
    <insert id="inputDocument">
        INSERT
        INTO documentDO (d_content,d_title,d_type,create_time,hits)
        VALUES (#{documentDO.content},#{documentDO.title},#{documentDO.type},#{documentDO.createTime},#{documentDO.hits})
    </insert>
    <!--<select id="getDocumentContent" resultMap="documentDO">-->
        <!--SELECT-->
        <!--d_id,hits FROM documentDO-->
    <!--</select>-->
    
    <update id="updateDocument">
        UPDATE documentDO SET
        <if test="documentDO.title !=null">
            d.d_title = #{documentDO.title}
        </if>
        <if test="documentDO.title !=null">
            d.d_abstract = #{documentDO.dAbstract}
        </if>
        <if test="documentDO.title !=null">
            d.d_content = #{documentDO.content}
        </if>
        <if test="documentDO.title !=null">
            d.d_keywords = #{documentDO.keywords}
        </if>
        <if test="documentDO.title !=null">
            d.d_topics = #{documentDO.topics}
        </if>
        <if test="documentDO.title !=null">
            d.d_path = #{documentDO.path}
        </if>
        <if test="documentDO.title !=null">
            d.d_type = #{documentDO.type}
        </if>
        <if test="documentDO.title !=null">
            d.create_time = #{documentDO.createTime}
        </if>
        <if test="documentDO.title !=null">
            d.hits = #{documentDO.hits}
        </if>
        WHERE d_id = #{documentDO.id}
    </update>

</mapper>
